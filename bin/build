#!/bin/bash

# Fail on errors
set -e

# Delete dist folder and recreate it
yarn clean && mkdir dist/

# For each page template, render html file
yarn render themes/alpha/404.ejs dist/404.html
yarn render themes/alpha/index.ejs dist/index.html
yarn render themes/alpha/typography.ejs dist/typography.html

# Create css folder, then for each css file template, render css file
mkdir dist/css/
yarn render themes/alpha/css/base.css.ejs dist/css/base.css
yarn render themes/alpha/css/util.css.ejs dist/css/util.css
yarn render themes/alpha/css/devices.css.ejs dist/css/devices.css

# Copy asset folders
cp -r themes/alpha/js/ dist/js/

# Format files
yarn format-dist
